## 组件介绍
流程组件包括前端的流程容器和后端的流程引擎，通过事件调用来绘制前端流程图，将绘制后的流程文件和节点状态做完参数交给流程引擎处理会获得流程当前的pending节点，并传递给前端
### 前端流程容器
#### 1.属性

![](https://file3.ih5.cn/v35/files/1b0d5832496a7e8d59ca467160cc6822_885_165_31.png)
![](https://file3.ih5.cn/v35/files/4602061247d6d1eef4e237ba8c753b0f_5989_270_234.png)

流程容器的属性中最重要的是数据来源，在绘制过程中会动态的改变这个属性值。动作组也可以随时调用这个值。

![](https://file3.ih5.cn/v35/files/bab28fca49e032a23e8bf079c74c5bfe_6250_266_234.png)

数据来源是经过特殊设计的json文件，绘制后可以进行存储，当已经存在这个值的时候可以绑定到属性做流程初始化展示

#### 2.事件 

![](https://file3.ih5.cn/v35/files/44f1de6f8ef29b36bac37e755094cffd_17283_873_345.png)

流程容器组件只有默认的点击节点事件，事件返回所点击节点的参数为：
- 节点序号：节点id，用于标识流程图中的节点，类型为数字，值唯一；
- 节点文本：内置的节点text，可用于存储/显示节点标题等信息；
- 节点类型：用于区分节点，与后端流程引擎处理/前端显示流程相关，通常分为普通节点和特殊节点。特殊节点包括if/gatewayAny/gatewayEvery，除此之外都是普通类型（用户自定义类型）；
- 参数数据：流程容器允许像节点内写入自定义数据。

#### 3.样式 

通常按类型区分节点的显示样式

![](https://file3.ih5.cn/v35/files/af2e2dd0ff248ca8f563b2d795cc90b9_3922_279_176.png)
![](https://file3.ih5.cn/v35/files/4ce4236d6b0e20c3e88a3c05da008162_2858_257_101.png)

分支节点样式

![](https://file3.ih5.cn/v35/files/7f01ed8f8ce32a996f6c818b87e14d38_3902_286_176.png)
![](https://file3.ih5.cn/v35/files/dcb35d273617ff17a8d9ca97c92688a1_3082_260_91.png)

普通节点样式
![](https://file3.ih5.cn/v35/files/9799629473c3ef6e017f02baff64fbf5_13570_767_206.png)

#### 4.动作 

![](https://file3.ih5.cn/v35/files/30f340ac063389950386ceeb7a8f4afc_17214_747_292.png)

流程容器的事件分为2大类，获取节点信息以及修改节点。

![](https://file3.ih5.cn/v35/files/b8046df1321617b0acd748a51a7286ee_7906_787_123.png)

常见的操作比如在添加节点，可以为新节点定义节点文本与节点类型，当不传节点序号时系统将自动分配序号。

![](https://file3.ih5.cn/v35/files/0c95980c59ea9970afdb14c8d764cbb4_9438_989_103.png)

当不传节点序号同事需要返回新建的节点序号时可以参考上图操作

### 后端流程引擎

通过绘制修改我们得到了前端流程容器的数据来源，接着就可以配合状态值来获取pending节点。使用到的就是后端流程引擎。

![](https://file3.ih5.cn/v35/files/28a0f18b27a1f79cff1aa4d0e9196f43_1168_174_35.png)
![](https://file3.ih5.cn/v35/files/e27c37a5406c74396b360a93f233bf1f_37191_893_490.png)

新建一个服务，调用引擎的获取阻塞节点，其中对应的参数分别是：
- 流程定义：前端流程容器的数据来源；
- 通过节点：类型为数组，结构为[{id:number(通过的节点序号),value:true/false(代表是否通过)}]
- 状态数据：如果流程中有if节点，state的值会影响if节点的判断从而影响pending节点的获取，结构为[{name:string(参数名称),value:值}]，if节点可以设置节点附带信息，将js值设置成对应的js判断语句，如图所示
![](https://file3.ih5.cn/v35/files/06f13de92d1c3f6c6a8776bf18f46475_7854_787_122.png)

此时state的值如果为[{name:"a1",value:3}]就能通过该if节点获取节点后的pending节点。

![](https://file3.ih5.cn/v35/files/a6a8b952043d497e2c4232f0851deb82_13705_715_429.png)

![](https://file3.ih5.cn/v35/files/26f1a01c268f7724da44c51237c97e2c_934_197_19.png)
预览一下该方法的运行结果，上面的示例中将1，6，9节点设置为通过节点，那么此时pending的节点为[ 13, 14, 10, 11, 4 ]
在日常使用时，可以将pending的节点作为用户的“可选节点”，配合相应的数据操作就可以实现审批流程相关的功能。